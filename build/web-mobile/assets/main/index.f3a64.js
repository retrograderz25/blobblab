System.register("chunks:///_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,o,i,n,s,a,l,h;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,l=t.UITransform,h=t.Component}],execute:function(){var u,c,p,d,B,f,m,g,b,v,y;n._RF.push({},"35e4aFyJH5Cz47ZvYM6t6Xe","Block",void 0);var z=s.ccclass,C=s.property;t("Block",(u=z("Block"),c=C(a),p=C(a),d=C(a),B=C(a),u((g=r((m=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return r=t.call.apply(t,[this].concat(n))||this,o(r,"topBorder",g,i(r)),o(r,"bottomBorder",b,i(r)),o(r,"leftBorder",v,i(r)),o(r,"rightBorder",y,i(r)),r.row=0,r.col=0,r.parentShape=null,r._uiTransform=null,r}e(r,t);var n=r.prototype;return n.onLoad=function(){this._uiTransform=this.getComponent(l)},n.setShape=function(t){this.parentShape=t},n.updateBorders=function(t,r,e,o){this.topBorder&&(this.topBorder.active=t),this.bottomBorder&&(this.bottomBorder.active=r),this.leftBorder&&(this.leftBorder.active=e),this.rightBorder&&(this.rightBorder.active=o)},n.resizeBorders=function(t){this._uiTransform||(this._uiTransform=this.getComponent(l));var r=this._uiTransform.width,e=this._uiTransform.height,o=r/2,i=e/2,n=r+t,s=e+t;this.topBorder&&(this.topBorder.getComponent(l).setContentSize(.8*n,t/2),this.topBorder.setPosition(0,i+t/2)),this.bottomBorder&&(this.bottomBorder.getComponent(l).setContentSize(.8*n,t/2),this.bottomBorder.setPosition(0,-i-t/2)),this.leftBorder&&(this.leftBorder.getComponent(l).setContentSize(t/2,.8*s),this.leftBorder.setPosition(-o-t/2,0)),this.rightBorder&&(this.rightBorder.getComponent(l).setContentSize(t/2,.8*s),this.rightBorder.setPosition(o+t/2,0))},r}(h)).prototype,"topBorder",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=r(m.prototype,"bottomBorder",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(m.prototype,"leftBorder",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(m.prototype,"rightBorder",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Block.ts"],(function(o){var t,e,i,n,l,r,c,a,s,p,u,f,h,k;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,i=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){l=o.cclegacy,r=o._decorator,c=o.Prefab,a=o.SpriteFrame,s=o.NodePool,p=o.instantiate,u=o.UITransform,f=o.Sprite,h=o.Component},function(o){k=o.Block}],execute:function(){var v,b,d,P,g,B,w,m;l._RF.push({},"88d600S9CBDXq350yxeSkwk","BlockPool",void 0);var z=r.ccclass,S=r.property;o("BlockPool",(v=z("BlockPool"),b=S(c),d=S([a]),v((B=t((g=function(o){function t(){for(var t,e=arguments.length,l=new Array(e),r=0;r<e;r++)l[r]=arguments[r];return t=o.call.apply(o,[this].concat(l))||this,i(t,"blockPrefab",B,n(t)),i(t,"blockSprites",w,n(t)),i(t,"initialPoolSize",m,n(t)),t.pool=null,t.activeBlocks=[],t}e(t,o);var l=t.prototype;return l.onLoad=function(){this.initPool()},l.initPool=function(){this.pool=new s;for(var o=0;o<this.initialPoolSize;o++){var t=p(this.blockPrefab);this.pool.put(t)}console.log("BlockPool initialized with "+this.initialPoolSize+" blocks")},l.spawn=function(o,t,e,i,n){var l;this.pool.size()>0?l=this.pool.get():(l=p(this.blockPrefab),console.warn("Pool empty, created a new block. Consider increasing pool size."));var r=l.getComponent(u);r&&r.setContentSize(t,e);var c=l.getComponent(k);c&&void 0!==n&&c.resizeBorders(n),o.addChild(l),l.active=!0;var a=l.getComponent(f);if(a)if(i)a.spriteFrame=i;else if(this.blockSprites.length>0){var s=Math.floor(Math.random()*this.blockSprites.length);a.spriteFrame=this.blockSprites[s]}return this.activeBlocks.push(l),l.getComponent(k)},l.despawn=function(o){if(o&&o.isValid){var t=this.activeBlocks.indexOf(o);t>-1&&this.activeBlocks.splice(t,1);var e=o.getComponent(k);e&&(e.row=0,e.col=0),o.active=!1,this.pool.put(o)}},l.despawnMultiple=function(o){var t=this;o.forEach((function(o){return t.despawn(o)}))},l.despawnAll=function(){var o=this;[].concat(this.activeBlocks).forEach((function(t){return o.despawn(t)}))},l.getActiveCount=function(){return this.activeBlocks.length},l.getPoolSize=function(){return this.pool.size()},l.clearPool=function(){this.despawnAll(),this.pool.clear(),this.activeBlocks=[],console.log("BlockPool cleared")},l.onDestroy=function(){this.clearPool()},t}(h)).prototype,"blockPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"blockSprites",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=t(g.prototype,"initialPoolSize",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),P=g))||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/EffectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,r,n,l,a,c,f,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.Prefab,c=e.NodePool,f=e.instantiate,s=e.ParticleSystem2D,u=e.Component}],execute:function(){var p,h,P,y,b,d;n._RF.push({},"4c957Qyx9tAWpigo0mJ1ugU","EffectPool",void 0);var v=l.ccclass,g=l.property;e("EffectPool",(p=v("EffectPool"),h=g(a),p((b=t((y=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(t,"effectPrefab",b,r(t)),i(t,"initialPoolSize",d,r(t)),t.pool=null,t}o(t,e);var n=t.prototype;return n.onLoad=function(){this.pool=new c;for(var e=0;e<this.initialPoolSize;e++){var t=f(this.effectPrefab);this.pool.put(t)}},n.spawn=function(e,t){var o,i=this;o=this.pool.size()>0?this.pool.get():f(this.effectPrefab),e.addChild(o),o.setPosition(t);var r=o.getComponent(s);return r.resetSystem(),this.scheduleOnce((function(){i.pool.put(o)}),r.life),o},t}(u)).prototype,"effectPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(y.prototype,"initialPoolSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),P=y))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InputManager.ts","./BlockPool.ts","./GameOverUI.ts","./EffectPool.ts","./Shape.ts","./ShapeData.ts","./NextBlockPreview.ts"],(function(e){var t,i,o,r,a,n,s,l,h,c,u,d,p,b,f,v,S,g,m,k,P,w,z,B,O,y,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.createForOfIteratorHelperLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,l=e.Node,h=e.Prefab,c=e.Label,u=e.sys,d=e.director,p=e.UITransform,b=e.instantiate,f=e.v3,v=e.Graphics,S=e.Vec3,g=e.tween,m=e.Component},function(e){k=e.SwipeDirection},function(e){P=e.BlockPool},function(e){w=e.GameOverUI},function(e){z=e.EffectPool},function(e){B=e.Shape},function(e){O=e.SHAPE_KEYS,y=e.SHAPES},function(e){G=e.NextBlockPreview}],execute:function(){var M,N,E,C,I,A,T,_,L,x,D,H,U,F,R,V,W,K,Z,j,J,Y,q,Q,X,$,ee,te,ie,oe;n._RF.push({},"4d0a8kUWPJHko8dVO5dpsBw","GameManager",void 0);var re=s.ccclass,ae=s.property;e("GameManager",(M=re("GameManager"),N=ae(l),E=ae(l),C=ae(l),I=ae(l),A=ae(l),T=ae(l),_=ae(P),L=ae(h),x=ae(c),D=ae(w),H=ae(z),U=ae(G),F=ae(l),M((W=t((V=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pauseButton",W,a(t)),r(t,"pausePanel",K,a(t)),r(t,"resumeButton",Z,a(t)),r(t,"menuButtonInPause",j,a(t)),r(t,"boardNode",J,a(t)),r(t,"inputManagerNode",Y,a(t)),r(t,"blockPool",q,a(t)),r(t,"cellPrefab",Q,a(t)),r(t,"scoreLabel",X,a(t)),r(t,"gameOverPanel",$,a(t)),r(t,"effectPool",ee,a(t)),r(t,"nextBlockPreview",te,a(t)),r(t,"boardSize",ie,a(t)),r(t,"boardBorder",oe,a(t)),t.cellSize=0,t.spacing=0,t.score=0,t.highScore=0,t.isGameOver=!1,t.isMoving=!1,t.blocks=[],t.shapesOnBoard=[],t.isPaused=!1,t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.inputManagerNode.on("swipe-detected",this.handleSwipe,this),this.pauseButton.on(l.EventType.TOUCH_END,this.pauseGame,this),this.resumeButton.on(l.EventType.TOUCH_END,this.resumeGame,this),this.menuButtonInPause.on(l.EventType.TOUCH_END,this.backToMenu,this);var e=parseInt(u.localStorage.getItem("selectedBoardSize")||"8");this.boardSize=e,this.highScore=parseInt(u.localStorage.getItem("blobblab_highscore_"+this.boardSize)||"0"),this.gameOverPanel&&(this.gameOverPanel.node.active=!1),this.pausePanel&&(this.pausePanel.active=!1),this.initBoard()},n.backToMenu=function(){this.isPaused&&d.resume(),d.loadScene("Menu")},n.pauseGame=function(){this.isGameOver||(this.isPaused=!0,this.pausePanel.active=!0,d.pause())},n.resumeGame=function(){this.isPaused=!1,this.pausePanel.active=!1,d.resume()},n.start=function(){this.startGame()},n.initBoard=function(){var e=Math.min(648,768)/this.boardSize;this.cellSize=.88*e,this.spacing=.12*e,this.boardNode.removeAllChildren(),this.blocks=[];var t=this.boardSize*(this.cellSize+this.spacing)-this.spacing;this.boardNode.getComponent(p).setContentSize(t,t);for(var i=-t/2+this.cellSize/2,o=t/2-this.cellSize/2,r=0;r<this.boardSize;r++){this.blocks[r]=[];for(var a=0;a<this.boardSize;a++){var n=b(this.cellPrefab);this.boardNode.addChild(n),n.getComponent(p).setContentSize(this.cellSize,this.cellSize);var s=i+a*(this.cellSize+this.spacing),l=o-r*(this.cellSize+this.spacing);n.setPosition(f(s,l)),this.blocks[r][a]=null}}if(this.boardBorder){var h=this.boardBorder.getComponent(v);h||(h=this.boardBorder.addComponent(v)),h.clear(),h.strokeColor.set(150,150,150,255),h.lineWidth=this.spacing;var c=this.boardNode.getComponent(p).width,u=this.boardNode.getComponent(p).height;h.rect(-c/2,-u/2,c,u),h.stroke()}},n.startGame=function(){var e=this;this.isGameOver=!1,this.isMoving=!1,this.gameOverPanel&&(this.gameOverPanel.node.active=!1),this.blockPool&&this.blockPool.despawnAll(),this.blocks=[];for(var t=0;t<this.boardSize;t++){this.blocks[t]=[];for(var i=0;i<this.boardSize;i++)this.blocks[t][i]=null}this.shapesOnBoard=[],this.nextBlockPreview&&this.nextBlockPreview.reset(),this.updateScore(0),this.spawnNewShape(),this.scheduleOnce((function(){return e.updateAllBorders()}),.3)},n.spawnNewShape=function(){if(this.blockPool&&0!==this.blockPool.blockSprites.length){var e,t;if(this.nextBlockPreview){var i=this.nextBlockPreview.getNextBlock();e=i.shapeKey,t=i.sprite}else{e=O[Math.floor(Math.random()*O.length)];var o=this.blockPool.blockSprites;t=o[Math.floor(Math.random()*o.length)]}var r=y[e],a=this.findEmptySpotForShape(r);if(a){for(var n=new B,s=0;s<r.length;s++)for(var l=0;l<r[s].length;l++)if(1===r[s][l]){var h=a.row+s,c=a.col+l,u=this.blockPool.spawn(this.boardNode,this.cellSize,this.cellSize,t,this.spacing);u.row=h,u.col=c,n.addBlock(u),this.blocks[h][c]=u,this.updateBlockPosition(u,!1);var d=u.node;d.setScale(S.ZERO),g(d).to(.2,{scale:S.ONE},{easing:"backOut"}).start()}this.shapesOnBoard.push(n)}else this.endGame()}else console.error("BlockPool is not ready or has no sprites!")},n.findEmptySpotForShape=function(e){for(var t=e.length,i=e[0].length,o=[],r=0;r<=this.boardSize-t;r++)for(var a=0;a<=this.boardSize-i;a++)this.canPlaceShapeAt(e,r,a)&&o.push({row:r,col:a});return o.length>0?o[Math.floor(Math.random()*o.length)]:null},n.canPlaceShapeAt=function(e,t,i){for(var o=0;o<e.length;o++)for(var r=0;r<e[o].length;r++)if(1===e[o][r]&&this.blocks[t+o][i+r])return!1;return!0},n.handleSwipe=function(e){var t=this;this.isMoving||this.isGameOver||this.isPaused||this.moveShapes(e)&&(this.isMoving=!0,this.scheduleOnce((function(){t.updateAllBorders(),t.checkAndClearLines(),t.scheduleOnce((function(){t.spawnNewShape(),t.updateAllBorders(),t.isGameOver||t.checkGameOver(),t.isMoving=!1}),.3)}),.15))},n.moveShapes=function(e){var t=!1,i=0,r=0;for(e===k.UP&&(i=-1),e===k.DOWN&&(i=1),e===k.LEFT&&(r=-1),e===k.RIGHT&&(r=1);;){for(var a,n=!1,s=[],l=o(this.shapesOnBoard);!(a=l()).done;){var h=a.value,c=!0;if(0!==h.childBlocks.length){for(var u,d=o(h.childBlocks);!(u=d()).done;){var p=u.value,b=p.row+i,f=p.col+r;if(b<0||b>=this.boardSize||f<0||f>=this.boardSize){c=!1;break}var v=this.blocks[b][f];if(v&&v.parentShape.id!==h.id){c=!1;break}}c&&s.push(h)}}if(s.length>0){n=!0,t=!0;for(var S,g=o(s);!(S=g()).done;){for(var m,P=S.value,w=[].concat(P.childBlocks).sort((function(e,t){return 1===i?t.row-e.row:-1===i?e.row-t.row:1===r?t.col-e.col:-1===r?e.col-t.col:0})),z=o(w);!(m=z()).done;){var B=m.value,O=B.row,y=B.col;this.blocks[O][y]=null}for(var G,M=o(w);!(G=M()).done;){var N=G.value,E=N.row+i,C=N.col+r;N.row=E,N.col=C,this.blocks[E][C]=N}}}if(!n)break}if(t)for(var I,A=o(this.shapesOnBoard);!(I=A()).done;)for(var T,_=I.value,L=o(_.childBlocks);!(T=L()).done;){var x=T.value;this.updateBlockPosition(x,!0)}return t},n.checkAndClearLines=function(){for(var e=this,t=[],i=[],o=0;o<this.boardSize;o++)this.blocks[o]&&this.blocks[o].every((function(e){return!!e}))&&t.push(o);for(var r=0;r<this.boardSize;r++){for(var a=!0,n=0;n<this.boardSize;n++)if(!this.blocks[n][r]){a=!1;break}a&&i.push(r)}for(var s=new Set,l=0,h=t;l<h.length;l++)for(var c=h[l],u=0;u<this.boardSize;u++)this.blocks[c][u]&&s.add(this.blocks[c][u]);for(var d=0,p=i;d<p.length;d++)for(var b=p[d],f=0;f<this.boardSize;f++)this.blocks[f][b]&&s.add(this.blocks[f][b]);if(s.size>0){var v=t.length+i.length;this.updateScore(this.score+10*v*v),s.forEach((function(t){e.blocks[t.row][t.col]=null,t.parentShape&&t.parentShape.removeBlock(t),e.effectPool&&e.effectPool.spawn(e.boardNode,t.node.position),g(t.node).to(.2,{scale:S.ZERO}).call((function(){e.blockPool.despawn(t.node),t.node.setScale(S.ONE)})).start()})),this.restructureShapes()}},n.restructureShapes=function(){for(var e,t=[],i=new Set,r=o(this.shapesOnBoard);!(e=r()).done;)for(var a,n=e.value,s=o(n.childBlocks);!(a=s()).done;){var l=a.value;if(!i.has(l)){var h=new B,c=[l];for(i.add(l);c.length>0;){var u=c.shift();h.addBlock(u);for(var d=0,p=[{r:u.row+1,c:u.col},{r:u.row-1,c:u.col},{r:u.row,c:u.col+1},{r:u.row,c:u.col-1}];d<p.length;d++){var b=p[d];if(b.r>=0&&b.r<this.boardSize&&b.c>=0&&b.c<this.boardSize){var f=this.blocks[b.r][b.c];f&&!i.has(f)&&f.parentShape.id===n.id&&(i.add(f),c.push(f))}}}h.childBlocks.length>0&&t.push(h)}}this.shapesOnBoard=t},n.updateAllBorders=function(){for(var e=0;e<this.boardSize;e++)for(var t=0;t<this.boardSize;t++){var i=this.blocks[e][t];if(i){var o=e>0?this.blocks[e-1][t]:null,r=e<this.boardSize-1?this.blocks[e+1][t]:null,a=t>0?this.blocks[e][t-1]:null,n=t<this.boardSize-1?this.blocks[e][t+1]:null,s=!1,l=!1,h=!1,c=!1;o&&o.parentShape.id===i.parentShape.id&&(s=!0),r&&r.parentShape.id===i.parentShape.id&&(l=!0),a&&a.parentShape.id===i.parentShape.id&&(h=!0),n&&n.parentShape.id===i.parentShape.id&&(c=!0),i.updateBorders(s,l,h,c)}}},n.checkGameOver=function(){return!!this.isGameOver||!this.findEmptySpotForShape([[1]])&&(this.endGame(),!0)},n.endGame=function(){this.isGameOver||(this.isGameOver=!0,this.isMoving=!0,console.log("GAME OVER!"),this.score>this.highScore&&(this.highScore=this.score,u.localStorage.setItem("blobblab_highscore_"+this.boardSize,this.highScore.toString())),this.gameOverPanel&&this.gameOverPanel.show(this.score,this.highScore))},n.forceGameOver=function(){this.isPaused&&this.resumeGame(),this.endGame()},n.updateBlockPosition=function(e,t){void 0===t&&(t=!0);var i=this.boardSize*(this.cellSize+this.spacing)-this.spacing,o=-i/2+this.cellSize/2,r=i/2-this.cellSize/2,a=o+e.col*(this.cellSize+this.spacing),n=r-e.row*(this.cellSize+this.spacing),s=new S(a,n,0);t?g(e.node).to(.1,{position:s},{easing:"cubicOut"}).start():e.node.setPosition(s)},n.updateScore=function(e){this.score=e,this.scoreLabel.string=""+this.score},t}(m)).prototype,"pauseButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(V.prototype,"pausePanel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(V.prototype,"resumeButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(V.prototype,"menuButtonInPause",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(V.prototype,"boardNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(V.prototype,"inputManagerNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(V.prototype,"blockPool",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(V.prototype,"cellPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(V.prototype,"scoreLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(V.prototype,"gameOverPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(V.prototype,"effectPool",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(V.prototype,"nextBlockPreview",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(V.prototype,"boardSize",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),oe=t(V.prototype,"boardBorder",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=V))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameOverUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,i,a,c,u,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Label,u=e.Node,l=e.director,s=e.Component}],execute:function(){var p,f,h,v,b,d,y,m,g;i._RF.push({},"0dc3a2OCMBJWbH0t7Piywvd","GameOverUI",void 0);var B=a.ccclass,I=a.property;e("GameOverUI",(p=B("GameOverUI"),f=I(c),h=I(u),v=I(u),p((y=t((d=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"scoreInfoLabel",y,o(t)),r(t,"restartButton",m,o(t)),r(t,"menuButton",g,o(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){this.restartButton.on(u.EventType.TOUCH_END,this.onRestart,this),this.menuButton.on(u.EventType.TOUCH_END,this.onBackToMenu,this)},i.onBackToMenu=function(){l.loadScene("Menu")},i.show=function(e,t){this.node.active=!0,this.scoreInfoLabel.string="Score: "+e+"\nHigh Score: "+t},i.hide=function(){this.node.active=!1},i.onRestart=function(){l.loadScene(l.getScene().name)},t}(s)).prototype,"scoreInfoLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(d.prototype,"restartButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(d.prototype,"menuButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/InputManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,e,o,r,s,a,c,h,u,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Enum,c=t.input,h=t.Input,u=t.v2,p=t.Component}],execute:function(){var T,f,l;r._RF.push({},"c9553Xpd0xGS5/NRwuXNYfm","InputManager",void 0);var E=s.ccclass,d=s.property,y=t("SwipeDirection",function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT",t}({}));a(y);t("InputManager",E("InputManager")((l=n((f=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,e(n,"swipeThreshold",l,o(n)),n.touchStartPos=u(0,0),n.isSwiping=!1,n}i(n,t);var r=n.prototype;return r.onLoad=function(){c.on(h.EventType.TOUCH_START,this.onTouchStart,this),c.on(h.EventType.TOUCH_END,this.onTouchEnd,this),c.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onDestroy=function(){c.off(h.EventType.TOUCH_START,this.onTouchStart,this),c.off(h.EventType.TOUCH_END,this.onTouchEnd,this),c.off(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchStart=function(t){this.touchStartPos=t.getUILocation(),this.isSwiping=!0},r.onTouchEnd=function(t){if(this.isSwiping){this.isSwiping=!1;var n=t.getUILocation().subtract(this.touchStartPos);if(!(n.length()<this.swipeThreshold)){var i=y.NONE;(i=Math.abs(n.x)>Math.abs(n.y)?n.x>0?y.RIGHT:y.LEFT:n.y>0?y.UP:y.DOWN)!==y.NONE&&this.node.emit("swipe-detected",i)}}},n}(p)).prototype,"swipeThreshold",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),T=f))||T);r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Block.ts","./BlockPool.ts","./EffectPool.ts","./GameManager.ts","./GameOverUI.ts","./InputManager.ts","./MenuManager.ts","./NextBlockPreview.ts","./ResponsiveCanvas.ts","./SafeAreaAdapter.ts","./Shape.ts","./ShapeData.ts","./TitleAnimation.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MenuManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,i,a,u,l,c,s,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,u=e.Node,l=e.Camera,c=e.Color,s=e.sys,d=e.director,p=e.Component}],execute:function(){var f,m,y,b,g,h,C,M,v,B,z,S,w;i._RF.push({},"98d355t4fpDlZuW7UL7Cv/A","MenuManager",void 0);var D=a.ccclass,T=a.property;e("MenuManager",(f=D("MenuManager"),m=T(u),y=T(u),b=T(u),g=T(l),h=T({type:c}),f((v=t((M=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"easyButton",v,o(t)),r(t,"mediumButton",B,o(t)),r(t,"hardButton",z,o(t)),r(t,"mainCamera",S,o(t)),r(t,"backgroundColor",w,o(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){var e=this;this.mainCamera&&(this.mainCamera.backgroundColor=this.backgroundColor),this.easyButton.on(u.EventType.TOUCH_END,(function(){return e.onModeSelected(8)}),this),this.mediumButton.on(u.EventType.TOUCH_END,(function(){return e.onModeSelected(12)}),this),this.hardButton.on(u.EventType.TOUCH_END,(function(){return e.onModeSelected(16)}),this)},i.onModeSelected=function(e){console.log("Board size selected: "+e),s.localStorage.setItem("selectedBoardSize",e.toString()),d.loadScene("scene")},t}(p)).prototype,"easyButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(M.prototype,"mediumButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"hardButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(M.prototype,"mainCamera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(M.prototype,"backgroundColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(40,44,52,255)}}),C=M))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/NextBlockPreview.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShapeData.ts","./Block.ts"],(function(e){var t,i,r,n,o,l,a,s,c,p,h,u,v,w,f,b,g,S,d,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.createForOfIteratorHelperLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,s=e.Node,c=e.Prefab,p=e.SpriteFrame,h=e.Label,u=e.v3,v=e.instantiate,w=e.UITransform,f=e.Sprite,b=e.Vec3,g=e.Component},function(e){S=e.SHAPE_KEYS,d=e.SHAPES},function(e){k=e.Block}],execute:function(){var P,C,m,x,B,y,z,N,L,M,O,_,D,F;l._RF.push({},"3b2f8uc1cBDdIwI6LwJvOp9","NextBlockPreview",void 0);var I=a.ccclass,E=a.property;e("NextBlockPreview",(P=I("NextBlockPreview"),C=E(s),m=E(c),x=E({type:[p]}),B=E(h),P((N=t((z=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"previewContainer",N,o(t)),n(t,"blockPrefab",L,o(t)),n(t,"blockSprites",M,o(t)),n(t,"previewCellSize",O,o(t)),n(t,"previewSpacing",_,o(t)),n(t,"numberOfPreviews",D,o(t)),n(t,"nextLabel",F,o(t)),t.nextBlocks=[],t.previewNodes=[],t}i(t,e);var l=t.prototype;return l.onLoad=function(){this.nextLabel&&(this.nextLabel.string=""),this.generateNextBlocks(),this.renderPreviews()},l.generateNextBlocks=function(){this.nextBlocks=[];for(var e=0;e<this.numberOfPreviews;e++){var t=S[Math.floor(Math.random()*S.length)],i=this.blockSprites[Math.floor(Math.random()*this.blockSprites.length)];this.nextBlocks.push({shapeKey:t,sprite:i})}},l.getNextBlock=function(){var e=this.nextBlocks.shift(),t=S[Math.floor(Math.random()*S.length)],i=this.blockSprites[Math.floor(Math.random()*this.blockSprites.length)];return this.nextBlocks.push({shapeKey:t,sprite:i}),this.renderPreviews(),e},l.peekNextBlock=function(){return this.nextBlocks[0]},l.renderPreviews=function(){if(this.clearPreviews(),this.previewContainer)for(var e=0,t=0;t<this.nextBlocks.length;t++){var i=this.nextBlocks[t],r=d[i.shapeKey],n=new s("Preview_"+t);this.previewContainer.addChild(n),this.previewNodes.push(n);var o=r.length,l=r[0].length*(this.previewCellSize+this.previewSpacing)-this.previewSpacing,a=o*(this.previewCellSize+this.previewSpacing)-this.previewSpacing;n.setPosition(u(0,e-a/2,0));for(var c=-l/2+this.previewCellSize/2,p=a/2-this.previewCellSize/2,h=0;h<r.length;h++)for(var v=0;v<r[h].length;v++)if(1===r[h][v]){var w=this.createPreviewCell(i.sprite);n.addChild(w);var f=c+v*(this.previewCellSize+this.previewSpacing),b=p-h*(this.previewCellSize+this.previewSpacing);w.setPosition(u(f,b,0))}e-=a+40}else console.warn("Preview container not set!")},l.createPreviewCell=function(e){var t;if(this.blockPrefab){var i=(t=v(this.blockPrefab)).getComponent(k);i&&i.updateBorders(!1,!1,!1,!1)}else(t=new s("PreviewCell")).addComponent(w),t.addComponent(f);t.getComponent(w).setContentSize(this.previewCellSize,this.previewCellSize);var r=t.getComponent(f);return r&&e&&(r.spriteFrame=e),t.setScale(b.ONE.clone().multiplyScalar(.8)),t},l.clearPreviews=function(){for(var e,t=r(this.previewNodes);!(e=t()).done;){e.value.destroy()}this.previewNodes=[]},l.reset=function(){this.generateNextBlocks(),this.renderPreviews()},t}(g)).prototype,"previewContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"blockPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(z.prototype,"blockSprites",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(z.prototype,"previewCellSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),_=t(z.prototype,"previewSpacing",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),D=t(z.prototype,"numberOfPreviews",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),F=t(z.prototype,"nextLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=z))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/ResponsiveCanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,o,s,r,a,c,u,l,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,a=e.sys,c=e.screen,u=e.view,l=e.ResolutionPolicy,h=e.Component}],execute:function(){var d,g,p,f;s._RF.push({},"011e4VEObtJrICeuHQmhcmV","ResponsiveCanvas",void 0);var v=r.ccclass,R=r.property;e("ResponsiveCanvas",v("ResponsiveCanvas")((p=i((g=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return i=e.call.apply(e,[this].concat(s))||this,n(i,"designWidth",p,o(i)),n(i,"designHeight",f,o(i)),i}t(i,e);var s=i.prototype;return s.onLoad=function(){var e=this;this.updateResolution(),a.isBrowser&&window.addEventListener("resize",(function(){e.scheduleOnce((function(){e.updateResolution()}),.1)})),c.on("orientation-change",this.updateResolution,this)},s.updateResolution=function(){var e=c.windowSize,i=e.width/e.height,t=this.designWidth/this.designHeight;console.log("Screen: "+e.width+"x"+e.height+", Ratio: "+i.toFixed(2)+", Design Ratio: "+t.toFixed(2)),i>t?(u.setDesignResolutionSize(this.designWidth,this.designHeight,l.FIXED_HEIGHT),console.log("Using FIXED_HEIGHT policy")):(u.setDesignResolutionSize(this.designWidth,this.designHeight,l.FIXED_WIDTH),console.log("Using FIXED_WIDTH policy"))},s.onDestroy=function(){c.off("orientation-change",this.updateResolution,this)},i}(h)).prototype,"designWidth",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 720}}),f=i(g.prototype,"designHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1280}}),d=g))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/SafeAreaAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,o,n,r,s,p,h,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Widget,p=t.screen,h=t.sys,d=t.view,g=t.Component}],execute:function(){var l,u,c,f,w,A;n._RF.push({},"dc482FFlvNG9KTviZuDbzAL","SafeAreaAdapter",void 0);var b=r.ccclass,m=r.property;t("SafeAreaAdapter",b("SafeAreaAdapter")((c=e((u=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,a(e,"adaptTop",c,o(e)),a(e,"adaptBottom",f,o(e)),a(e,"adaptLeft",w,o(e)),a(e,"adaptRight",A,o(e)),e.widget=null,e}i(e,t);var n=e.prototype;return n.onLoad=function(){this.widget=this.getComponent(s),this.widget||(this.widget=this.addComponent(s)),this.updateSafeArea(),p.on("orientation-change",this.updateSafeArea,this)},n.updateSafeArea=function(){if(h.isMobile){var t=h.getSafeAreaRect(),e=p.windowSize,i=d.getDesignResolutionSize(),a=i.width/e.width,o=i.height/e.height,n=(e.height-(t.y+t.height))*o,r=t.y*o,s=t.x*a,g=(e.width-(t.x+t.width))*a;console.log("Safe Area - Top: "+n+", Bottom: "+r+", Left: "+s+", Right: "+g),this.widget&&(this.widget.isAlignTop=this.adaptTop,this.widget.isAlignBottom=this.adaptBottom,this.widget.isAlignLeft=this.adaptLeft,this.widget.isAlignRight=this.adaptRight,this.adaptTop&&(this.widget.top=n),this.adaptBottom&&(this.widget.bottom=r),this.adaptLeft&&(this.widget.left=s),this.adaptRight&&(this.widget.right=g),this.widget.updateAlignment())}},n.onDestroy=function(){p.off("orientation-change",this.updateSafeArea,this)},e}(g)).prototype,"adaptTop",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=e(u.prototype,"adaptBottom",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=e(u.prototype,"adaptLeft",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=e(u.prototype,"adaptRight",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=u))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/Shape.ts",["cc"],(function(c){var i,t;return{setters:[function(c){i=c.cclegacy,t=c._decorator}],execute:function(){var s;i._RF.push({},"58a217G3oxMj4+44y48XndH","Shape",void 0);var e=t.ccclass,o=0;c("Shape",e("Shape")(s=function(){function c(){this.id=void 0,this.childBlocks=[],this.id=o++}var i=c.prototype;return i.addBlock=function(c){this.childBlocks.includes(c)||(this.childBlocks.push(c),c.setShape(this))},i.removeBlock=function(c){var i=this.childBlocks.indexOf(c);i>-1&&(this.childBlocks.splice(i,1),c.setShape(null))},c}())||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/ShapeData.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d1756pTpFBCFLlbn5rMCGTL","ShapeData",void 0);var c=e("SHAPES",{O:[[1,1],[1,1]],I:[[1],[1],[1],[1]],T:[[1,1,1],[0,1,0]],L:[[1,0],[1,0],[1,1]],J:[[0,1],[0,1],[1,1]],S:[[0,1,1],[1,1,0]],Z:[[1,1,0],[0,1,1]],SINGLE:[[1]]});e("SHAPE_KEYS",Object.keys(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/TitleAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,l,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.tween,s=e.Component}],execute:function(){var c,u,b,p,h;r._RF.push({},"a7b8cnQ4fJKW4ydDh8qO0xd","TitleAnimation",void 0);var g=l.ccclass,d=l.property;e("TitleAnimation",g("TitleAnimation")((b=t((u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"wobbleSpeed",b,o(t)),i(t,"wobbleAngle",p,o(t)),i(t,"scaleAmount",h,o(t)),t}n(t,e);var r=t.prototype;return r.start=function(){this.startWobble()},r.startWobble=function(){var e=this.node.scale.clone(),t=e.clone().multiplyScalar(1-this.scaleAmount),n=e.clone().multiplyScalar(1+this.scaleAmount);a(this.node).to(this.wobbleSpeed/2,{angle:this.wobbleAngle},{easing:"sineInOut"}).to(this.wobbleSpeed,{angle:-this.wobbleAngle},{easing:"sineInOut"}).to(this.wobbleSpeed/2,{angle:0},{easing:"sineInOut"}).union().repeatForever().start(),a(this.node).to(this.wobbleSpeed,{scale:n},{easing:"sineInOut"}).to(this.wobbleSpeed,{scale:t},{easing:"sineInOut"}).union().repeatForever().start()},t}(s)).prototype,"wobbleSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),p=t(u.prototype,"wobbleAngle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),h=t(u.prototype,"scaleAmount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),c=u))||c);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});