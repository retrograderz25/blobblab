System.register("bundle://main/_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,r,t,c;return{setters:[function(o){e=o.inheritsLoose},function(o){r=o.cclegacy,t=o._decorator,c=o.Component}],execute:function(){var n;r._RF.push({},"35e4aFyJH5Cz47ZvYM6t6Xe","Block",void 0);var l=t.ccclass;t.property,o("Block",l("Block")(n=function(o){function r(){for(var e,r=arguments.length,t=new Array(r),c=0;c<r;c++)t[c]=arguments[c];return(e=o.call.apply(o,[this].concat(t))||this).row=0,e.col=0,e}return e(r,o),r}(c))||n);r._RF.pop()}}}));

System.register("bundle://main/_virtual/BlockPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Block.ts"],(function(o){var t,i,e,n,l,r,c,a,s,p,u,h,f,k;return{setters:[function(o){t=o.applyDecoratedDescriptor,i=o.inheritsLoose,e=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){l=o.cclegacy,r=o._decorator,c=o.Prefab,a=o.SpriteFrame,s=o.NodePool,p=o.instantiate,u=o.UITransform,h=o.Sprite,f=o.Component},function(o){k=o.Block}],execute:function(){var b,v,d,P,g,w,B,S;l._RF.push({},"88d600S9CBDXq350yxeSkwk","BlockPool",void 0);var m=r.ccclass,z=r.property;o("BlockPool",(b=m("BlockPool"),v=z(c),d=z([a]),b((w=t((g=function(o){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=o.call.apply(o,[this].concat(l))||this,e(t,"blockPrefab",w,n(t)),e(t,"blockSprites",B,n(t)),e(t,"initialPoolSize",S,n(t)),t.pool=null,t.activeBlocks=[],t}i(t,o);var l=t.prototype;return l.onLoad=function(){this.initPool()},l.initPool=function(){this.pool=new s;for(var o=0;o<this.initialPoolSize;o++){var t=p(this.blockPrefab);this.pool.put(t)}console.log("BlockPool initialized with "+this.initialPoolSize+" blocks")},l.spawn=function(o,t,i){var e;this.pool.size()>0?e=this.pool.get():(e=p(this.blockPrefab),console.warn("Pool empty, created a new block. Consider increasing pool size."));var n=e.getComponent(u);if(n&&n.setContentSize(t,i),o.addChild(e),e.active=!0,this.blockSprites.length>0){var l=Math.floor(Math.random()*this.blockSprites.length),r=e.getComponent(h);r&&(r.spriteFrame=this.blockSprites[l])}return this.activeBlocks.push(e),e.getComponent(k)},l.despawn=function(o){if(o&&o.isValid){var t=this.activeBlocks.indexOf(o);t>-1&&this.activeBlocks.splice(t,1);var i=o.getComponent(k);i&&(i.row=0,i.col=0),o.active=!1,this.pool.put(o)}},l.despawnMultiple=function(o){var t=this;o.forEach((function(o){return t.despawn(o)}))},l.despawnAll=function(){var o=this;[].concat(this.activeBlocks).forEach((function(t){return o.despawn(t)}))},l.getActiveCount=function(){return this.activeBlocks.length},l.getPoolSize=function(){return this.pool.size()},l.clearPool=function(){this.despawnAll(),this.pool.clear(),this.activeBlocks=[],console.log("BlockPool cleared")},l.onDestroy=function(){this.clearPool()},t}(f)).prototype,"blockPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(g.prototype,"blockSprites",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(g.prototype,"initialPoolSize",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),P=g))||P));l._RF.pop()}}}));

System.register("bundle://main/_virtual/EffectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,r,n,l,a,c,f,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.Prefab,c=e.NodePool,f=e.instantiate,s=e.ParticleSystem2D,u=e.Component}],execute:function(){var p,h,P,b,y,d;n._RF.push({},"4c957Qyx9tAWpigo0mJ1ugU","EffectPool",void 0);var v=l.ccclass,g=l.property;e("EffectPool",(p=v("EffectPool"),h=g(a),p((y=t((b=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(t,"effectPrefab",y,r(t)),i(t,"initialPoolSize",d,r(t)),t.pool=null,t}o(t,e);var n=t.prototype;return n.onLoad=function(){this.pool=new c;for(var e=0;e<this.initialPoolSize;e++){var t=f(this.effectPrefab);this.pool.put(t)}},n.spawn=function(e,t){var o,i=this;o=this.pool.size()>0?this.pool.get():f(this.effectPrefab),e.addChild(o),o.setPosition(t);var r=o.getComponent(s);return r.resetSystem(),this.scheduleOnce((function(){i.pool.put(o)}),r.life),o},t}(u)).prototype,"effectPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(b.prototype,"initialPoolSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),P=b))||P));n._RF.pop()}}}));

System.register("bundle://main/_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InputManager.ts","./BlockPool.ts","./GameOverUI.ts","./EffectPool.ts"],(function(e){var i,o,t,r,s,a,n,l,c,h,b,u,d,f,S,g,p,v,z,k;return{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,n=e.Node,l=e.Prefab,c=e.Label,h=e.sys,b=e.UITransform,u=e.instantiate,d=e.v3,f=e.Vec3,S=e.tween,g=e.Component},function(e){p=e.SwipeDirection},function(e){v=e.BlockPool},function(e){z=e.GameOverUI},function(e){k=e.EffectPool}],execute:function(){var m,w,P,O,y,B,G,N,M,C,I,_,L,E,R,A,D,U,T;s._RF.push({},"4d0a8kUWPJHko8dVO5dpsBw","GameManager",void 0);var F=a.ccclass,H=a.property;e("GameManager",(m=F("GameManager"),w=H(n),P=H(n),O=H(v),y=H(l),B=H(c),G=H(z),N=H(k),m((I=i((C=function(e){function i(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=e.call.apply(e,[this].concat(s))||this,t(i,"boardNode",I,r(i)),t(i,"inputManagerNode",_,r(i)),t(i,"blockPool",L,r(i)),t(i,"cellPrefab",E,r(i)),t(i,"scoreLabel",R,r(i)),t(i,"gameOverPanel",A,r(i)),t(i,"boardSize",D,r(i)),t(i,"initialBlockCount",U,r(i)),t(i,"effectPool",T,r(i)),i.cellSize=0,i.spacing=0,i.blocks=[],i.score=0,i.highScore=0,i.isGameOver=!1,i.isMoving=!1,i}o(i,e);var s=i.prototype;return s.start=function(){this.inputManagerNode.on("swipe-detected",this.handleSwipe,this);var e=parseInt(h.localStorage.getItem("selectedBoardSize")||"8");this.boardSize=e,this.highScore=parseInt(h.localStorage.getItem("blobblab_highscore_"+this.boardSize)||"0"),this.gameOverPanel&&(this.gameOverPanel.node.active=!1),this.initBoard(),this.startGame()},s.initBoard=function(){var e=.95*this.boardNode.parent.getComponent(b).contentSize.width/this.boardSize;this.cellSize=.9*e,this.spacing=.1*e,console.log("Responsive Board: Size="+this.boardSize+", CellSize="+this.cellSize+", Spacing="+this.spacing),this.boardNode.removeAllChildren(),this.blocks=[];var i=this.boardSize*(this.cellSize+this.spacing)-this.spacing;this.boardNode.getComponent(b).setContentSize(i,i);for(var o=-i/2+this.cellSize/2,t=i/2-this.cellSize/2,r=0;r<this.boardSize;r++){this.blocks[r]=[];for(var s=0;s<this.boardSize;s++){var a=u(this.cellPrefab);this.boardNode.addChild(a),a.getComponent(b).setContentSize(this.cellSize,this.cellSize);var n=o+s*(this.cellSize+this.spacing),l=t-r*(this.cellSize+this.spacing);a.setPosition(d(n,l)),this.blocks[r][s]=null}}},s.startGame=function(){this.isGameOver=!1,this.gameOverPanel&&(this.gameOverPanel.node.active=!1),this.blockPool&&this.blockPool.despawnAll(),this.blocks=[];for(var e=0;e<this.boardSize;e++){this.blocks[e]=[];for(var i=0;i<this.boardSize;i++)this.blocks[e][i]=null}this.updateScore(0);for(var o=0;o<this.initialBlockCount;o++)this.spawnNewBlock()},s.spawnNewBlock=function(){if(this.blockPool){for(var e=[],i=0;i<this.boardSize;i++)for(var o=0;o<this.boardSize;o++)this.blocks[i][o]||e.push({row:i,col:o});if(0!==e.length){var t=e[Math.floor(Math.random()*e.length)],r=this.blockPool.spawn(this.boardNode,this.cellSize,this.cellSize);r.row=t.row,r.col=t.col,this.blocks[t.row][t.col]=r,this.updateBlockPosition(r,!1);var s=r.node;s.setScale(f.ZERO),S(s).to(.2,{scale:f.ONE},{easing:"backOut"}).start()}}},s.handleSwipe=function(e){var i=this;this.isMoving||this.isGameOver||this.moveBlocks(e)&&(this.isMoving=!0,this.scheduleOnce((function(){i.checkAndClearLines(),i.spawnNewBlock(),i.checkGameOver(),i.isMoving=!1}),.2))},s.updateBlockPosition=function(e,i){void 0===i&&(i=!0);var o=this.boardSize*(this.cellSize+this.spacing)-this.spacing,t=-o/2+this.cellSize/2,r=o/2-this.cellSize/2,s=t+e.col*(this.cellSize+this.spacing),a=r-e.row*(this.cellSize+this.spacing),n=new f(s,a,0);i?S(e.node).to(.1,{position:n},{easing:"cubicOut"}).start():e.node.setPosition(n)},s.moveBlocks=function(e){var i=this,o=!1,t=function(e,t,r,s){var a=i.blocks[e][t];if(a){for(var n=e,l=t,c=e+r,h=t+s;c>=0&&c<i.boardSize&&h>=0&&h<i.boardSize&&!i.blocks[c][h];)n=c,l=h,c+=r,h+=s;n===e&&l===t||(i.blocks[n][l]=a,i.blocks[e][t]=null,a.row=n,a.col=l,i.updateBlockPosition(a,!0),o=!0)}};if(e===p.UP)for(var r=0;r<this.boardSize;r++)for(var s=0;s<this.boardSize;s++)t(r,s,-1,0);else if(e===p.DOWN)for(var a=this.boardSize-1;a>=0;a--)for(var n=0;n<this.boardSize;n++)t(a,n,1,0);else if(e===p.LEFT)for(var l=0;l<this.boardSize;l++)for(var c=0;c<this.boardSize;c++)t(c,l,0,-1);else if(e===p.RIGHT)for(var h=this.boardSize-1;h>=0;h--)for(var b=0;b<this.boardSize;b++)t(b,h,0,1);return o},s.checkAndClearLines=function(){for(var e=this,i=[],o=[],t=0;t<this.boardSize;t++)this.blocks[t]&&this.blocks[t].every((function(e){return!!e}))&&i.push(t);for(var r=0;r<this.boardSize;r++){for(var s=!0,a=0;a<this.boardSize;a++)if(!this.blocks[a][r]){s=!1;break}s&&o.push(r)}var n=i.length+o.length;n>0&&this.updateScore(this.score+10*n*n);for(var l=0;l<this.boardSize;l++)this.blocks[l]&&this.blocks[l].every((function(e){return!!e}))&&i.push(l);for(var c=0;c<this.boardSize;c++){for(var h=!0,b=0;b<this.boardSize;b++)if(!this.blocks[b][c]){h=!1;break}h&&o.push(c)}for(var u=new Set,d=0,g=i;d<g.length;d++)for(var p=g[d],v=0;v<this.boardSize;v++)this.blocks[p][v]&&u.add(this.blocks[p][v]);for(var z=0,k=o;z<k.length;z++)for(var m=k[z],w=0;w<this.boardSize;w++)this.blocks[w][m]&&u.add(this.blocks[w][m]);if(u.size>0){var P=i.length+o.length;this.updateScore(this.score+10*P*P),u.forEach((function(i){e.blocks[i.row][i.col]=null,e.effectPool&&e.effectPool.spawn(e.boardNode,i.node.position),S(i.node).to(.2,{scale:f.ZERO},{easing:"sineIn"}).call((function(){e.blockPool.despawn(i.node),i.node.setScale(f.ONE)})).start()}))}},s.updateScore=function(e){this.score=e,this.scoreLabel.string=""+this.score},s.checkGameOver=function(){for(var e=0,i=0;i<this.boardSize;i++)for(var o=0;o<this.boardSize;o++)this.blocks[i][o]||e++;return!(e>0)&&(this.isGameOver=!0,this.score>this.highScore&&(this.highScore=this.score,h.localStorage.setItem("blobblab_highscore_"+this.boardSize,this.highScore.toString())),this.gameOverPanel&&this.gameOverPanel.show(this.score,this.highScore),!0)},s.forceGameOver=function(){this.isGameOver||(this.isGameOver=!0,this.score>this.highScore&&(this.highScore=this.score,h.localStorage.setItem("blobblab_highscore_"+this.boardSize,this.highScore.toString())),this.gameOverPanel&&this.gameOverPanel.show(this.score,this.highScore))},i}(g)).prototype,"boardNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(C.prototype,"inputManagerNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(C.prototype,"blockPool",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(C.prototype,"cellPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(C.prototype,"scoreLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(C.prototype,"gameOverPanel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(C.prototype,"boardSize",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),U=i(C.prototype,"initialBlockCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),T=i(C.prototype,"effectPool",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=C))||M));s._RF.pop()}}}));

System.register("bundle://main/_virtual/GameOverUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,i,a,u,c,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,u=e.Label,c=e.Node,l=e.director,s=e.Component}],execute:function(){var p,f,h,b,d,v,m,y,g;i._RF.push({},"0dc3a2OCMBJWbH0t7Piywvd","GameOverUI",void 0);var B=a.ccclass,I=a.property;e("GameOverUI",(p=B("GameOverUI"),f=I(u),h=I(c),b=I(c),p((m=t((v=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"scoreInfoLabel",m,o(t)),r(t,"restartButton",y,o(t)),r(t,"menuButton",g,o(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){this.restartButton.on(c.EventType.TOUCH_END,this.onRestart,this),this.menuButton.on(c.EventType.TOUCH_END,this.onBackToMenu,this)},i.onBackToMenu=function(){l.loadScene("Menu")},i.show=function(e,t){this.node.active=!0,this.scoreInfoLabel.string="Score: "+e+"\nHigh Score: "+t},i.hide=function(){this.node.active=!1},i.onRestart=function(){l.loadScene(l.getScene().name)},t}(s)).prototype,"scoreInfoLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(v.prototype,"restartButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(v.prototype,"menuButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d));i._RF.pop()}}}));

System.register("bundle://main/_virtual/InputManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,e,o,r,s,a,c,h,u,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Enum,c=t.v2,h=t.input,u=t.Input,p=t.Component}],execute:function(){var T,f,l;r._RF.push({},"c9553Xpd0xGS5/NRwuXNYfm","InputManager",void 0);var E=s.ccclass,d=s.property,y=t("SwipeDirection",function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT",t}({}));a(y);t("InputManager",E("InputManager")((l=n((f=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,e(n,"swipeThreshold",l,o(n)),n.touchStartPos=c(0,0),n.isSwiping=!1,n}i(n,t);var r=n.prototype;return r.onLoad=function(){h.on(u.EventType.TOUCH_START,this.onTouchStart,this),h.on(u.EventType.TOUCH_END,this.onTouchEnd,this),h.on(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onDestroy=function(){h.off(u.EventType.TOUCH_START,this.onTouchStart,this),h.off(u.EventType.TOUCH_END,this.onTouchEnd,this),h.off(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchStart=function(t){this.touchStartPos=t.getUILocation(),this.isSwiping=!0},r.onTouchEnd=function(t){if(this.isSwiping){this.isSwiping=!1;var n=t.getUILocation().subtract(this.touchStartPos);if(!(n.length()<this.swipeThreshold)){var i=y.NONE;(i=Math.abs(n.x)>Math.abs(n.y)?n.x>0?y.RIGHT:y.LEFT:n.y>0?y.UP:y.DOWN)!==y.NONE&&this.node.emit("swipe-detected",i)}}},n}(p)).prototype,"swipeThreshold",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),T=f))||T);r._RF.pop()}}}));

System.register("bundle://main/_virtual/main",["./Block.ts","./BlockPool.ts","./EffectPool.ts","./GameManager.ts","./GameOverUI.ts","./InputManager.ts","./MenuManager.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("bundle://main/_virtual/MenuManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i,u,a,l,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,u=e._decorator,a=e.Node,l=e.sys,c=e.director,s=e.Component}],execute:function(){var d,p,f,y,h,g,m,M,v;i._RF.push({},"98d355t4fpDlZuW7UL7Cv/A","MenuManager",void 0);var B=u.ccclass,b=u.property;e("MenuManager",(d=B("MenuManager"),p=b(a),f=b(a),y=b(a),d((m=t((g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return t=e.call.apply(e,[this].concat(i))||this,o(t,"easyButton",m,r(t)),o(t,"mediumButton",M,r(t)),o(t,"hardButton",v,r(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){var e=this;this.easyButton.on(a.EventType.TOUCH_END,(function(){return e.onModeSelected(8)}),this),this.mediumButton.on(a.EventType.TOUCH_END,(function(){return e.onModeSelected(12)}),this),this.hardButton.on(a.EventType.TOUCH_END,(function(){return e.onModeSelected(16)}),this)},i.onModeSelected=function(e){console.log("Board size selected: "+e),l.localStorage.setItem("selectedBoardSize",e.toString()),c.loadScene("scene")},t}(s)).prototype,"easyButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(g.prototype,"mediumButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"hardButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));i._RF.pop()}}}));

System.register("bundle://main/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(e){return{execute:function(){function i(t,r){return(i=e("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e}))(t,r)}e({applyDecoratedDescriptor:function(e,i,t,r,n){var o={};Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=t.slice().reverse().reduce((function(t,r){return r(e,i,t)||t}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(e,i,o),o=null);return o},assertThisInitialized:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},inheritsLoose:function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},initializerDefineProperty:function(e,i,t,r){if(!t)return;Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})},setPrototypeOf:i})}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'bundle://main/_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});